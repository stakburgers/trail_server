//dictionary to store the coordinates for each trail
const trailCoordinatesDict = {
    "albany": [
    [-36.724965, 174.694171], 
    [-36.725132, 174.693974], 
    [-36.725239, 174.693958], 
    [-36.725313, 174.693770], 
    [-36.725285, 174.693726], 
    [-36.725146, 174.693446], 
    [-36.725290, 174.693347], 
    [-36.725610, 174.693662], 
    [-36.725716, 174.693677], 
    [-36.725909, 174.693548], 
    [-36.727070, 174.693667], 
    [-36.728560, 174.693204], 
    [-36.72891, 174.69131], 
    [-36.72804, 174.69065], 
    [-36.72810, 174.69034], 
    [-36.72875, 174.69033], 
    [-36.72938, 174.68990], 
    [-36.72991, 174.68985], 
    [-36.73018, 174.68950], 
    [-36.73055, 174.68927], 
    [-36.73103, 174.68926], 
    [-36.73175, 174.68876], 
    [-36.73225, 174.68882], 
    [-36.73298, 174.68870], 
    [-36.73388, 174.69168],
    [-36.73295, 174.69246], 
    [-36.73190, 174.69421], 
    [-36.73086, 174.69397], 
    [-36.73060, 174.69354], 
    [-36.72855, 174.69320],
    [-36.728560, 174.693204], 
    [-36.727070, 174.693667], 
    [-36.725909, 174.693548], 
    [-36.725716, 174.693677], 
    [-36.725610, 174.693662], 
    [-36.725290, 174.693347], 
    [-36.725146, 174.693446], 
    [-36.725285, 174.693726], 
    [-36.725313, 174.693770], 
    [-36.725239, 174.693958], 
    [-36.725132, 174.693974], 
    [-36.724900, 174.694000], 
    ],
    "ambury": [
        [-36.94648, 174.76086], 
        [-36.945857, 174.759683], 
        [-36.947009, 174.758803], 
        [-36.946297, 174.757701], 
        [-36.944749, 174.758797], 
        [-36.944854, 174.759121], 
        [-36.944538, 174.758981], 
        [-36.944314, 174.759068], 
        [-36.944489, 174.759244], 
        [-36.944854, 174.759121], 
        [-36.945183, 174.760076], 
        [-36.945491, 174.759769], 
        [-36.945960, 174.761242], 
    ],
    "archibald": [
        [-36.895315, 174.669159], 
        [-36.895874, 174.670809], 
        [-36.896221, 174.671399], 
        [-36.895778, 174.671881], 
        [-36.894574, 174.671339], 
        [-36.894304, 174.671399], 
        [-36.894092, 174.671303], 
        [-36.893062, 174.671580], 
        [-36.892320, 174.670713], 
        [-36.891944, 174.670436], 
        [-36.891732, 174.669930], 
        [-36.892108, 174.669773], 
        [-36.892773, 174.668689], 
        [-36.893062, 174.668617], 
        [-36.893697, 174.669749], 
        [-36.894198, 174.671002],
        [-36.894092, 174.671351],
        [-36.894314, 174.671411],
        [-36.894543, 174.671336],
        [-36.894699, 174.671373],
        [-36.895316, 174.671740],
        [-36.895542, 174.671796],
        [-36.895884, 174.671926],
        [-36.896088, 174.671768],
    ],
    "barrys": [
        [-36.959473, 174.914422], 
        [-36.959595, 174.914599], 
        [-36.959098, 174.915162], 
        [-36.959219, 174.915311], 
        [-36.959329, 174.915361], 
        [-36.959455, 174.915359], 
        [-36.959656, 174.915440], 
        [-36.959753, 174.915526], 
        [-36.959823, 174.915757], 
        [-36.959830, 174.916004], 
        [-36.959876, 174.916169], 
        [-36.960246, 174.916364], 
        [-36.960406, 174.916303], 
        [-36.960507, 174.916128], 
        [-36.960858, 174.915737], 
        [-36.960987, 174.915408], 
        [-36.961064, 174.914806], 
        [-36.961170, 174.914409], 
        [-36.961171, 174.914051], 
        [-36.960757, 174.913483], 
        [-36.960493, 174.913341], 
        [-36.960247, 174.913016], 
        [-36.960174, 174.912706], 
        [-36.960220, 174.912297], 
        [-36.960023, 174.911857], 
        [-36.960009, 174.911415], 
        [-36.960320, 174.910894], 
        [-36.960282, 174.910762], 
        [-36.959974, 174.910759], 
        [-36.959801, 174.910847], 
        [-36.959264, 174.909867], 
        [-36.959307, 174.909424], 
        [-36.957941, 174.908714], 
        [-36.957815, 174.909109], 
        [-36.958543, 174.913114], 
        [-36.958690, 174.913351], 
        [-36.958651, 174.913424], 
    ],
    "beachlands": [
        [-36.879201, 175.008562], 
        [-36.879173, 175.008820], 
        [-36.879231, 175.009002], 
        [-36.879401, 175.009051], 
        [-36.879641, 175.008858], 
        [-36.879732, 175.008922], 
        [-36.879902, 175.010269], 
        [-36.880138, 175.010876], 
        [-36.880038, 175.011338], 
        [-36.880111, 175.011888], 
        [-36.880260, 175.012143], 
        [-36.880436, 175.012636], 
        [-36.880590, 175.013463], 
        [-36.880915, 175.013671], 
        [-36.881394, 175.013694], 
        [-36.882417, 175.014695], 
        [-36.882523, 175.014711], 
        [-36.882465, 175.015022], 
        [-36.882320, 175.015071], 
        [-36.881986, 175.015393], 
        [-36.882024, 175.015951], 
        [-36.881994, 175.016312], 
        [-36.882027, 175.016646], 
        [-36.881748, 175.017837], 
        [-36.882112, 175.018417], 
        [-36.881672, 175.018519], 
        [-36.881284, 175.018307], 
        [-36.881062, 175.018288], 
        [-36.880826, 175.018485], 
        [-36.880813, 175.018633], 
        [-36.880859, 175.018728], 
        [-36.881083, 175.018922], 
        [-36.881108, 175.019035], 
        [-36.880792, 175.019855], 
        [-36.880519, 175.019980], 
        [-36.880052, 175.019726], 
        [-36.879539, 175.019980], 
        [-36.879090, 175.020481], 
        [-36.878944, 175.020344], 
        [-36.878747, 175.020545], 
        [-36.878659, 175.020970], 
        [-36.879235, 175.022317], 
        [-36.879053, 175.022461], 
        [-36.879059, 175.022673], 
        [-36.879211, 175.022852], 
        [-36.879323, 175.024191], 
        [-36.879244, 175.024521], 
        [-36.879138, 175.024540], 
        [-36.878659, 175.024016], 
        [-36.878638, 175.024100], 
        [-36.878801, 175.024642], 
        [-36.878562, 175.024646], 
        [-36.878362, 175.026075], 
        [-36.878238, 175.026417], 
        [-36.878180, 175.026838], 
        [-36.877868, 175.027160], 
        [-36.877646, 175.027767], 
        [-36.877100, 175.029877], 
        [-36.877202, 175.032662], 
        [-36.877336, 175.033134], 
        [-36.876289, 175.035997], 
        [-36.874746, 175.037915], 
        [-36.877965, 175.041615], 
        [-36.878949, 175.041782], 
    ],
    "birdwood": [
        [-36.854997, 174.597859], 
        [-36.854905, 174.597887], 
        [-36.854783, 174.597813], 
        [-36.854701, 174.597843], 
        [-36.854638, 174.597732], 
        [-36.854417, 174.597688], 
        [-36.854253, 174.597816], 
        [-36.854184, 174.597919], 
        [-36.854122, 174.598169], 
        [-36.854194, 174.598381], 
        [-36.854163, 174.598546], 
        [-36.854067, 174.598708], 
        [-36.854138, 174.599019], 
        [-36.854018, 174.599210], 
        [-36.854759, 174.599771], 
        [-36.854038, 174.600979], 
        [-36.854015, 174.601578], 
        [-36.854207, 174.601911], 
        [-36.854193, 174.601692], 
        [-36.855649, 174.600509], 
        [-36.856645, 174.599387], 
        [-36.856662, 174.599137], 
        [-36.856869, 174.598524], 
        [-36.857293, 174.598221], 
        [-36.858187, 174.598068], 
        [-36.858640, 174.598068], 
        [-36.858833, 174.598024], 
        [-36.859057, 174.597801], 
        [-36.859169, 174.597516], 
        [-36.859509, 174.597148], 
        [-36.859776, 174.596749], 
        [-36.859762, 174.596337], 
        [-36.860007, 174.596026], 
        [-36.860162, 174.595338], 
        [-36.860968, 174.595053], 
        [-36.861207, 174.594869], 
        [-36.861960, 174.594663], 
        [-36.862511, 174.594141], 
        [-36.862841, 174.593567], 
        [-36.863111, 174.593068], 
        [-36.863437, 174.592883], 
    ],
    "bucklands": [
        [-36.87910, 174.90265], 
        [-36.878390, 174.902711], 
        [-36.877987, 174.902573], 
        [-36.877344, 174.902847], 
        [-36.876519, 174.904560], 
        [-36.876192, 174.904864], 
        [-36.876003, 174.904901], 
        [-36.875936, 174.905067], 
        [-36.875944, 174.905276], 
        [-36.875798, 174.905503], 
        [-36.875671, 174.906023], 
        [-36.875157, 174.906250], 
        [-36.872724, 174.905675], 
        [-36.871191, 174.904705], 
        [-36.870734, 174.904096], 
        [-36.869564, 174.903632], 
        [-36.868755, 174.903521], 
        [-36.865159, 174.901492], 
        [-36.862774, 174.899727], 
        [-36.861407, 174.899100], 
        [-36.860255, 174.900024], 
        [-36.858814, 174.900256], 
    ],
    "clendon": [
    [-37.044064, 174.857367], 
    [-37.042197, 174.858042], 
    [-37.042357, 174.859585], 
    [-37.041966, 174.859681], 
    [-37.041644, 174.859304], 
    [-37.040769, 174.857893], 
    [-37.040126, 174.858016], 
    [-37.038509, 174.857183], 
    [-37.038418, 174.856562], 
    [-37.037897, 174.856315], 
    [-37.037644, 174.855720], 
    [-37.036009, 174.856754], 
    [-37.035478, 174.856595], 
    [-37.034137, 174.856521], 
    [-37.033824, 174.856758], 
    [-37.033829, 174.856886], 
    [-37.033476, 174.857420], 
    [-37.033263, 174.857332], 
    [-37.033055, 174.857048], 
    [-37.031725, 174.856606],
    [-37.031606, 174.856420], 
    [-37.031410, 174.856247], 
    [-37.031288, 174.855501], 
    [-37.031002, 174.855149], 
    [-37.030792, 174.855359], 
    [-37.030452, 174.855345], 
    [-37.030314, 174.855159], 
    [-37.029885, 174.854899], 
    [-37.029726, 174.855166], 
    [-37.029621, 174.855088], 
    [-37.029737, 174.854872], 
    [-37.029710, 174.854818], 
    [-37.029575, 174.854872], 
    [-37.029106, 174.855426], 
    [-37.028938, 174.855507], 
    [-37.028760, 174.855436], 
    [-37.028609, 174.855447], 
    [-37.028375, 174.855617], 
    [-37.028275, 174.855664], 
    [-37.028155, 174.855664], 
    [-37.028006, 174.855728], 
    [-37.027746, 174.856018], 
    [-37.027504, 174.856173], 
    [-37.026139, 174.856823], 
    [-37.026083, 174.856989], 
    [-37.026093, 174.857155], 
    [-37.026109, 174.858106], 
    ],
    "craigavon": [
    [-36.92794, 174.68930], 
    [-36.92813, 174.68954], 
    [-36.928187, 174.689709], 
    [-36.928187, 174.690031], 
    [-36.928504, 174.690975], 
    [-36.928804, 174.692284], 
    [-36.928693, 174.692820], 
    [-36.928324, 174.693035], 
    [-36.927424, 174.692713], 
    [-36.927312, 174.692541], 
    [-36.927160, 174.692428], 
    [-36.927147, 174.692240], 
    [-36.927143, 174.691553], 
    [-36.926738, 174.691217], 
    [-36.926348, 174.691075],  
    [-36.927111, 174.689382],  
    [-36.927270, 174.689313],  
    [-36.927747, 174.689313],  
    ],
    "devonport": [
        [-36.832519, 174.796822], 
        [-36.831913, 174.798000], 
        [-36.831832, 174.798324], 
        [-36.831634, 174.798667], 
        [-36.831628, 174.798842], 
        [-36.831533, 174.799145], 
        [-36.831703, 174.800124], 
        [-36.831602, 174.800883], 
        [-36.831439, 174.801436], 
        [-36.830644, 174.803128], 
        [-36.829932, 174.803951], 
        [-36.828528, 174.806298], 
        [-36.828143, 174.806778], 
        [-36.828030, 174.806913], 
        [-36.827984, 174.807889], 
        [-36.828124, 174.808034], 
        [-36.828376, 174.80890], 
    ],
    "hunua": [
        [-37.066913, 175.089276], 
        [-37.067034, 175.089602], 
        [-37.068033, 175.089648], 
        [-37.068299, 175.089534], 
        [-37.068305, 175.089185], 
        [-37.067572, 175.088829], 
        [-37.067149, 175.089018], 

    ],
    "shepherds": [
        [-36.790569, 174.688250], 
        [-36.790547, 174.688129], 
        [-36.790457, 174.688106], 
        [-36.790344, 174.688160], 
        [-36.790303, 174.688166], 
        [-36.790152, 174.688094], 
        [-36.790064, 174.688134], 
        [-36.789842, 174.688119], 
        [-36.789492, 174.688078], 
        [-36.789390, 174.688008], 
        [-36.788422, 174.688003], 
        [-36.788343, 174.688094], 
        [-36.788326, 174.689261], 
        [-36.788525, 174.689306], 
        [-36.788608, 174.689435], 
        [-36.788615, 174.689737], 
        [-36.788959, 174.689894], 
        [-36.789824, 174.689931], 
        [-36.789893, 174.688574], 
        [-36.790023, 174.688578], 
        [-36.790233, 174.688692], 
        [-36.790431, 174.688703], 
        [-36.790486, 174.688721], 
        [-36.790619, 174.688664], 
        [-36.790823, 174.688484], 
    ],
}

const mapviewDict = {
    "albany": [-36.724965, 174.694171],
    "ambury": [-36.94648, 174.76086],
    "archibald": [-36.895315, 174.669159],
    "barrys": [-36.959473, 174.914422],
    "beachlands": [-36.879201, 175.008562],
    "birdwood": [-36.854997, 174.597859],
    "bucklands": [-36.87910, 174.90265],
    "clendon": [-37.044064, 174.857367], 
    "craigavon": [-36.92794, 174.68930], 
    "devonport": [-36.832519, 174.796822],
    "hunua": [-37.066913, 175.089276],
    "shepherds": [-36.790569, 174.688250],
}

document.addEventListener("DOMContentLoaded", function () {

    const trailName = document.getElementById('map').getAttribute('data-trail');
    // Initialize the map
    var viewCor = mapviewDict[trailName];
    var map = L.map('map').setView(viewCor, 15);


    //here is were i get the data from the DB given the trail name
    /*
    var coordinates = fetch('/trail_coordinates/' + trailName)
        .then(function (response) {
            return response.json();
        })
        .then(function (coordinates) {
            console.log(coordinates);
            return coordinates;
        })
        .catch(function (error) {
            console.error('Error:', error);
        });
    */

    // Define the base map layer
    var baseLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    var coordinates = trailCoordinatesDict[trailName];
    var start_point = coordinates[0];
    var end_point = coordinates[coordinates.length - 1];
    // Define the trail polyline
    var trail = L.polyline(coordinates, { color: 'red' }).addTo(map);
    trail.bindPopup('This is the trail.');

    // Create an object to store overlay layers
    var overlayLayers = {
        'Trail': trail, // Add the trail layer
    };

    // Create a layer control and add it to the map
    L.control.layers(null, overlayLayers).addTo(map);

    // Create a marker for the start point
    var marker = L.marker(start_point).addTo(map);
    marker.bindPopup('Start Point');

    // Create a marker for the end point
    var marker = L.marker(end_point).addTo(map);
    marker.bindPopup('End Point');

    // Add a search control
    var searchControl = L.Control.geocoder({
        position: 'topright',
        defaultMarkGeocode: false,
    }).addTo(map);

    searchControl.on('markgeocode', function (e) {
        var latlng = e.geocode.center;
        map.setView(latlng, 15);
    });

    // Add scale control
    L.control.scale().addTo(map);

    // Customize the map further if needed
    console.log('Map has been initialized.');
    // You can add more layers, controls, and functionality here.
});
